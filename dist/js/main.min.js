<<<<<<< HEAD
/*! ischool 08-04-2016 */
function multiplyMatrices(a,b){for(var c=[],d=0;d<a.length;d++){c[d]=[];for(var e=0;e<b[0].length;e++){for(var f=0,g=0;g<a[0].length;g++)f+=a[d][g]*b[g][e];c[d][e]=f}}return c}function toTitleCase(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})}function cloneObject(a){if(null===a||"object"!=typeof a)return a;var b=a.constructor();for(var c in a)b[c]=cloneObject(a[c]);return b}function pop_SecondarySchools(a,b){var c=$('<div class="popupGraph" style="width:100%;height:100%;"><svg/></div>')[0],d=L.popup().setContent(c);b.bindPopup(d);var e=document.createElement("tr"),f=document.createElement("td"),g=document.createElement("td"),h=(schoolTableBody.append(e),$("#schoolTable tbody tr:last-child"));h.append(f,g),f.innerHTML=toTitleCase(String(a.properties.School_Name)),g.innerHTML=String(a.properties.address),h.click(function(){map.setView(b.getLatLng(),15),b.openPopup()})}function schoolMarker(a){var b=L.MakiMarkers.icon({icon:"college",color:"#474747",size:"m"});return b}function homeMarker(a){var b=L.MakiMarkers.icon({icon:"building",color:"#ffbe95",size:"l"});return b}function getCoord(a){add_hmarker&&map.removeLayer(add_hmarker);var b="http://www.onemap.sg/API/services.svc/getToken?accessKEY=0+nU5hAyy+NgqVpO3mepHsmZ1r6d+LI49ib3TUJuO9mG+HraaLvzEmEjXCdpYzyL14cwxTLFj6Jgc1EMIUClbdsmU/Egnr44bte4m9ecFNv2Rj99njfzrw==|mv73ZvjFcSo=";"localhost"==document.location.hostname&&(b="http://www.onemap.sg/API/services.svc/getToken?accessKEY=xkg8VRu6Ol+gMH+SUamkRIEB7fKzhwMvfMo/2U8UJcFhdvR4yN1GutmUIA3A6r3LDhot215OVVkZvNRzjl28TNUZgYFSswOi");var c="";$.getJSON(b).done(function(b){c=b.GetToken[0].NewToken;var d="http://www.onemap.sg/APIV2/services.svc/basicSearchV2?token="+c+"&searchVal="+a+"&otptFlds=SEARCHVAL,CATEGORY&returnGeom=0&rset=1&projSys=WGS84";$.getJSON(d).done(function(a){if(console.log(a.size),console.log(a),2===a.SearchResults.length){var b=parseFloat(a.SearchResults[1].X),c=parseFloat(a.SearchResults[1].Y);homeCoord=[b,c],homePoint.features[0].geometry.coordinates=homeCoord,add_hmarker=L.geoJson(homePoint,{pointToLayer:function(a,b){return L.marker(b,{icon:homeMarker(a)})}}).addTo(map),$("#postalCodeResult").html("Postal Code Found")}else $("#postalCodeResult").html("Postal Code Not Found")}).fail(function(a){$("#postalCodeResult").html("<span>Postal Code Error</span>")})})}function calcWeight(){var a=[],b=[],c=[],d=0;for(a.push(parseFloat(slider1.noUiSlider.get()),parseFloat(slider2.noUiSlider.get()),parseFloat(slider3.noUiSlider.get()),parseFloat(slider4.noUiSlider.get()),parseFloat(slider5.noUiSlider.get()),parseFloat(slider6.noUiSlider.get()),parseFloat(slider7.noUiSlider.get()),parseFloat(slider8.noUiSlider.get()),parseFloat(slider9.noUiSlider.get()),parseFloat(slider10.noUiSlider.get())),i=0;i<a.length;i++)0===a[i]?a[i]=1:a[i]>0?a[i]++:(a[i]--,a[i]=Math.pow(-1*a[i],-1));for(i=0;i<5;i++){var e=[];for(j=0;j<5;j++)if(i===j)e.push(1);else if(j>i){var f=a.shift();e.push(f)}else e.push("");b.push(e)}for(i=0;i<b.length;i++)for(j=0;j<b.length;j++)""===b[i][j]&&(b[i][j]=Math.pow(b[j][i],-1));for(b=multiplyMatrices(b,b),console.log(b),i=0;i<b.length;i++){var g=0;for(j=0;j<b.length;j++)g+=b[i][j];c.push(g),d+=g}for(j=0;j<c.length;j++)c[j]=c[j]/d;return c}Object.size=function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c};var map=L.map("map",{zoomControl:!1,maxZoom:17,minZoom:11}).fitBounds([[1.470774832084756,104.08848306516336],[1.158698700635265,103.60543572198932]]),feature_group=new L.featureGroup([]),bounds_group=new L.featureGroup([]),basemap=L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:' &copy; <a href="http://openstreetmap.org">OpenStreetMap</a>',maxZoom:17}).addTo(map);L.control.zoom({position:"topleft"}).addTo(map),L.control.scale({options:{position:"bottomright",maxWidth:100,metric:!0,imperial:!1,updateWhenIdle:!1}}).addTo(map);var sidebar=L.control.sidebar("sidebar-control",{position:"right"});map.addControl(sidebar);var defaultOptions={start:0,step:1,behaviour:"tap",range:{min:-3,max:3}},slider1=document.getElementById("slider0-1"),slider2=document.getElementById("slider0-2"),slider3=document.getElementById("slider0-3"),slider4=document.getElementById("slider0-4"),slider5=document.getElementById("slider1-2"),slider6=document.getElementById("slider1-3"),slider7=document.getElementById("slider1-4"),slider8=document.getElementById("slider2-3"),slider9=document.getElementById("slider2-4"),slider10=document.getElementById("slider3-4");noUiSlider.create(slider1,defaultOptions),noUiSlider.create(slider2,defaultOptions),noUiSlider.create(slider3,defaultOptions),noUiSlider.create(slider4,defaultOptions),noUiSlider.create(slider5,defaultOptions),noUiSlider.create(slider6,defaultOptions),noUiSlider.create(slider7,defaultOptions),noUiSlider.create(slider8,defaultOptions),noUiSlider.create(slider9,defaultOptions),noUiSlider.create(slider10,defaultOptions);var schoolTableBody=$("#schoolTable tbody"),json_SecondarySchools=new L.geoJson(secondarySchools,{onEachFeature:pop_SecondarySchools,pointToLayer:function(a,b){return L.marker(b,{icon:schoolMarker(a)})}}).addTo(map),homePoint={type:"FeatureCollection",crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}},features:[{type:"Feature",properties:{name:"Home"},geometry:{type:"Point",coordinates:[]}}]},homePostalCode=0,homeCoord,add_hmarker;$("#inputPostalCode").change(function(){getCoord($("#inputPostalCode").val())}),$("#buttonAHP").click(function(){calcWeight()});
=======
/*! ischool 09-04-2016 */
function multiplyMatrices(a,b){for(var c=[],d=0;d<a.length;d++){c[d]=[];for(var e=0;e<b[0].length;e++){for(var f=0,g=0;g<a[0].length;g++)f+=a[d][g]*b[g][e];c[d][e]=f}}return c}function toTitleCase(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})}function cloneObject(a){if(null===a||"object"!=typeof a)return a;var b=a.constructor();for(var c in a)b[c]=cloneObject(a[c]);return b}function pop_SecondarySchools(a,b){var c=toTitleCase(String(a.properties.School_Name));b.bindPopup(c);var d=document.createElement("tr"),e=document.createElement("td"),f=document.createElement("td"),g=(schoolTableBody.append(d),$("#schoolTable tbody tr:last-child"));g.append(e,f),e.innerHTML=toTitleCase(String(a.properties.School_Name)),f.innerHTML=String(a.properties.address),g.click(function(){map.setView(b.getLatLng(),15),b.openPopup()})}function schoolMarker(a){var b=L.MakiMarkers.icon({icon:"college",color:"#474747",size:"m"});return b}function homeMarker(a){var b=L.MakiMarkers.icon({icon:"building",color:"#ffbe95",size:"l"});return b}function getCoord(a){add_hmarker&&map.removeLayer(add_hmarker);var b="http://www.onemap.sg/API/services.svc/getToken?accessKEY=0+nU5hAyy+NgqVpO3mepHsmZ1r6d+LI49ib3TUJuO9mG+HraaLvzEmEjXCdpYzyL14cwxTLFj6Jgc1EMIUClbdsmU/Egnr44bte4m9ecFNv2Rj99njfzrw==|mv73ZvjFcSo=";"localhost"==document.location.hostname&&(b="http://www.onemap.sg/API/services.svc/getToken?accessKEY=xkg8VRu6Ol+gMH+SUamkRIEB7fKzhwMvfMo/2U8UJcFhdvR4yN1GutmUIA3A6r3LDhot215OVVkZvNRzjl28TNUZgYFSswOi");var c="";$.getJSON(b).done(function(b){c=b.GetToken[0].NewToken;var d="http://www.onemap.sg/APIV2/services.svc/basicSearchV2?token="+c+"&searchVal="+a+"&otptFlds=SEARCHVAL,CATEGORY&returnGeom=0&rset=1&projSys=WGS84";$.getJSON(d).done(function(a){if(2===a.SearchResults.length){var b=parseFloat(a.SearchResults[1].X),c=parseFloat(a.SearchResults[1].Y);homeCoord=[b,c],homePoint.features[0].geometry.coordinates=homeCoord,add_hmarker=L.geoJson(homePoint,{pointToLayer:function(a,b){return L.marker(b,{icon:homeMarker(a)})}}).addTo(map),$("#postalCodeResult").html("Postal Code Found")}else $("#postalCodeResult").html("Postal Code Not Found")}).fail(function(a){$("#postalCodeResult").html("<span>Postal Code Error</span>")})})}function calcWeight(){var a=[],b=[],c=[],d=0;for(a.push(parseFloat(slider1.noUiSlider.get()),parseFloat(slider2.noUiSlider.get()),parseFloat(slider3.noUiSlider.get()),parseFloat(slider4.noUiSlider.get()),parseFloat(slider5.noUiSlider.get()),parseFloat(slider6.noUiSlider.get()),parseFloat(slider7.noUiSlider.get()),parseFloat(slider8.noUiSlider.get()),parseFloat(slider9.noUiSlider.get()),parseFloat(slider10.noUiSlider.get())),i=0;i<a.length;i++)0===a[i]?a[i]=1:a[i]>0?a[i]++:(a[i]--,a[i]=Math.pow(-1*a[i],-1));for(i=0;i<5;i++){var e=[];for(j=0;j<5;j++)if(i===j)e.push(1);else if(j>i){var f=a.shift();e.push(f)}else e.push("");b.push(e)}for(i=0;i<b.length;i++)for(j=0;j<b.length;j++)""===b[i][j]&&(b[i][j]=Math.pow(b[j][i],-1));for(b=multiplyMatrices(b,b),i=0;i<b.length;i++){var g=0;for(j=0;j<b.length;j++)g+=b[i][j];c.push(g),d+=g}for(j=0;j<c.length;j++)c[j]=c[j]/d;return c}function calcDist(){var a=homePoint.features[0],b={},c="kilometers";for(i=0;i<schoolPoints.length;i++){var d=turf.distance(a,schoolPoints[i],c);b[i]=d}return console.log("distance of schools from home: "+b),b}Object.size=function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c};var map=L.map("map",{zoomControl:!1,maxZoom:17,minZoom:11}).fitBounds([[1.470774832084756,104.08848306516336],[1.158698700635265,103.60543572198932]]),feature_group=new L.featureGroup([]),bounds_group=new L.featureGroup([]),basemap=L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:' &copy; <a href="http://openstreetmap.org">OpenStreetMap</a>',maxZoom:17}).addTo(map);L.control.zoom({position:"topleft"}).addTo(map),L.control.scale({options:{position:"bottomright",maxWidth:100,metric:!0,imperial:!1,updateWhenIdle:!1}}).addTo(map);var sidebar=L.control.sidebar("sidebar-control",{position:"right"});map.addControl(sidebar);var defaultOptions={start:0,step:1,behaviour:"tap",range:{min:-3,max:3}},slider1=document.getElementById("slider0-1"),slider2=document.getElementById("slider0-2"),slider3=document.getElementById("slider0-3"),slider4=document.getElementById("slider0-4"),slider5=document.getElementById("slider1-2"),slider6=document.getElementById("slider1-3"),slider7=document.getElementById("slider1-4"),slider8=document.getElementById("slider2-3"),slider9=document.getElementById("slider2-4"),slider10=document.getElementById("slider3-4");noUiSlider.create(slider1,defaultOptions),noUiSlider.create(slider2,defaultOptions),noUiSlider.create(slider3,defaultOptions),noUiSlider.create(slider4,defaultOptions),noUiSlider.create(slider5,defaultOptions),noUiSlider.create(slider6,defaultOptions),noUiSlider.create(slider7,defaultOptions),noUiSlider.create(slider8,defaultOptions),noUiSlider.create(slider9,defaultOptions),noUiSlider.create(slider10,defaultOptions);var schoolTableBody=$("#schoolTable tbody"),schoolPoints=[],json_SecondarySchools=new L.geoJson(secondarySchools,{onEachFeature:pop_SecondarySchools,pointToLayer:function(a,b){return schoolPoints.push(a),L.marker(b,{icon:schoolMarker(a)})}}).addTo(map),homePoint={type:"FeatureCollection",crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}},features:[{type:"Feature",properties:{name:"Home"},geometry:{type:"Point",coordinates:[]}}]},homePostalCode=0,homeCoord,add_hmarker;$("#inputPostalCode").change(function(){getCoord($("#inputPostalCode").val())}),$("#buttonAHP").click(function(){getCoord($("#inputPostalCode").val()),calcWeight(),calcDist(add_hmarker)});var test;
>>>>>>> fe56eb813533ddef174d88f917174193f7dcd000
