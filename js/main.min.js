/*! ischool 07-04-2016 */
function toTitleCase(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})}function cloneObject(a){if(null===a||"object"!=typeof a)return a;var b=a.constructor();for(var c in a)b[c]=cloneObject(a[c]);return b}function pop_SecondarySchools(a,b){var c=toTitleCase(String(a.properties.School_Name));b.bindPopup(c);var d=document.createElement("tr"),e=document.createElement("td"),f=document.createElement("td"),g=(schoolTableBody.append(d),$("#schoolTable tbody tr:last-child"));g.append(e,f),e.innerHTML=toTitleCase(String(a.properties.School_Name)),f.innerHTML=String(a.properties.address),g.click(function(){map.setView(b.getLatLng(),15),b.openPopup()})}function schoolMarker(a){var b=L.MakiMarkers.icon({icon:"college",color:"#474747",size:"m"});return b}function getCoord(a){var b="http://www.onemap.sg/API/services.svc/basicSearch?token=qo/s2TnSUmfLz+32CvLC4RMVkzEFYjxqyti1KhByvEacEdMWBpCuSSQ+IFRT84QjGPBCuz/cBom8PfSm3GjEsGc8PkdEEOEr&searchVal="+a+"&otptFlds=SEARCHVAL,CATEGORY&returnGeom=1&rset=1";$.getJSON(b).done(function(a){var b=parseFloat(a.SearchResults[1].X),c=parseFloat(a.SearchResults[1].Y);homeCoord=[b,c],console.log(homeCoord)}).fail(function(a){console.log("Request Failed: "+a)})}var map=L.map("map",{zoomControl:!1,maxZoom:17,minZoom:11}).fitBounds([[1.470774832084756,104.08848306516336],[1.158698700635265,103.60543572198932]]),feature_group=new L.featureGroup([]),bounds_group=new L.featureGroup([]),basemap=L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:' &copy; <a href="http://openstreetmap.org">OpenStreetMap</a>',maxZoom:17}).addTo(map);L.control.zoom({position:"topleft"}).addTo(map),L.control.scale({options:{position:"bottomright",maxWidth:100,metric:!0,imperial:!1,updateWhenIdle:!1}}).addTo(map);var sidebar=L.control.sidebar("sidebar-control",{position:"right"});map.addControl(sidebar);var defaultOptions={start:4,step:1,behaviour:"tap",range:{min:1,max:7}},slider1=document.getElementById("slider1-2"),slider2=document.getElementById("slider1-3"),slider3=document.getElementById("slider1-4"),slider4=document.getElementById("slider1-5"),slider5=document.getElementById("slider2-3"),slider6=document.getElementById("slider2-4"),slider7=document.getElementById("slider2-5"),slider8=document.getElementById("slider3-4"),slider9=document.getElementById("slider3-5"),slider10=document.getElementById("slider4-5");noUiSlider.create(slider1,defaultOptions),noUiSlider.create(slider2,defaultOptions),noUiSlider.create(slider3,defaultOptions),noUiSlider.create(slider4,defaultOptions),noUiSlider.create(slider5,defaultOptions),noUiSlider.create(slider6,defaultOptions),noUiSlider.create(slider7,defaultOptions),noUiSlider.create(slider8,defaultOptions),noUiSlider.create(slider9,defaultOptions),noUiSlider.create(slider10,defaultOptions);var schoolTableBody=$("#schoolTable tbody"),json_SecondarySchools=new L.geoJson(secondarySchools,{onEachFeature:pop_SecondarySchools,pointToLayer:function(a,b){return L.marker(b,{icon:schoolMarker(a)})}}).addTo(map),homeMarkerIcon=L.MakiMarkers.icon({icon:"building",color:"#ffbe95",size:"m"}),homePostalCode=0,homeCoord;$("#inputPostalCode").change(function(){homePostalCode=$("#inputPostalCode").val(),getCoord(homePostalCode)});